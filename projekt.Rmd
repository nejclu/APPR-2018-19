---
title: "Analiza stopnje sreče ljudi v državah po svetu"
author: "Nejc Lukežič"
output:
  html_document: default
  pdf_document:
    includes:
      in_header: lib/styles.sty
    latex_engine: xelatex
---
```{r setup, echo=FALSE, results='hide', message=FALSE, warning=FALSE}
# Če želimo nastaviti pisave v PDF-ju, odkomentiramo
# in sledimo navodilom v programu.
#source("fontconfig.r", encoding="UTF-8")

# Uvoz vseh potrebnih knjižnic
source("lib/libraries.r", encoding="UTF-8")
```

```{r rstudio, echo=FALSE, results='asis', warning=FALSE}
# Izris povezave do RStudia na Binderju
source("lib/rstudio.r", encoding="UTF-8")
```

V projektu bom analiziral stopnjo sreče ljudi po posameznih državah v svetu med letoma 2015 in 2017.Za vsako izmed 148 držav je podano število na lestvici od 1 do 10, ki predstavlja mero sreče ljudi v državi, ta pa je seštevek sedmih komponent – šestih glavnih (BDP države, pričakovana življenjska doba, svoboda, radodarnost, korupcija, pomen družine) in dodatne komponente, ki je seštevek rezultata izmišljene države z najmanj srečnimi državljani (»Dystopia«) in ocene napake pri končnem rezultatu vsake države, ki jo da prvih 6 spremenljivk. Pri tem bom skušal ugotoviti kateri izmed faktorjev so najpomembnejši za srečnejše življenje, koliko se stopnja sreče ljudi po državah spreminja tekom treh let (2015 – 2017) in če je katera izmed držav doživela velik skok ali padec v stopnji sreče v tem obdobju. Podatke bom primerjal tudi po celinah. Kot dodatni spremenljivki sem si izbral število in prirast prebivalcev določene države, zanimalo pa me bo ali obstaja kakšna korelacija med stopnjo sreče ljudi in številom ljudi, ki živi v določeni državi oziroma njegovim prirastom.


# Obdelava, uvoz in čiščenje podatkov

```{r uvoz, echo=FALSE, message=FALSE, warning=FALSE}
source("uvoz/uvoz.r", encoding="UTF-8")
```

Podatke o stopnji sreče ljudi sem uvozil v obliki CSV s spletne strani Kaggle, podatke o številu prebivalcev in prirastu držav pa v obliki HTML z Wikipedije. Podatke imam v dveh razpredelnicah v obliki *tidy data*.

1. `Stopnja sreče ljudi` - podatki o stopnji sreče ljudi za
  - `Država (Country)` - spremenljivka: ime države (besedilo)
  - `Leto (Year)` - spremenljivka: leto, katerega so bile opravljene meritve (celo število)
  - `Mesto na lestvici (Happiness Rank)` - meritev: Od 1 do 148 (celo število)
  - `BDP (Economy-GDP per capita)` - meritev: v kolikšni meri BDP določene države vpliva na izračun stopnje sreče ljudi (celo število)
  - `Družina (Family)` - meritev: v kolikšni meri pomen družine vpliva na izračun stopnje sreče ljudi (število)
  - `Pričakovana življenjska doba (Health - life expectancy)` - meritev: v kolikšni meri pričakovana življenjska doba vpliva na izračun stopnje sreče ljudi (število)
  - `Svoboda (Freedom)` - meritev: v kolikšni meri svoboda odločanja vpliva na izračun stopnje sreče ljudi (število)
  - `Korupcija (Trust - Government corruption)` - meritev: v kolikšni meri korupcija (oziroma njena odsotnost) vpliva na izračun stopnje sreče ljudi (število)
  - `Radodarnost (Generosity)` - meritev: v kolikšni meri radodarnost ljudi vpliva na izračun stopnje sreče (število)
  - `Dystopia + residual` - meritev: v kolikšni meri rezultat države »Dystopia« in ocena napake prejšnjih meritev vpliva na izračun stopnje sreče ljudi (število)
  
  
2. `Prebivalstvo` - podatki o prebivalstvu po državah
  - `Država (Country)` - spremenljivka: ime države (besedilo)
  - `Prebivalstvo (Population)` - spremenljivka: Število ljudi v določeni državi (izmerjeno leta 2016) (celo število)
  - `Prirast (Change)` - spremenljivka: razlika med številom ljudi, ki živi v državi med letoma 2016 in 2017 (izraženo v procentih) (število)


***

# Analiza in vizualizacija podatkov

```{r vizualizacija, echo=FALSE, message=FALSE, warning=FALSE, results='hide'}
source("vizualizacija/vizualizacija.r", encoding="UTF-8")
```

Prva dva grafa sta si med seboj zelo podobna. Na 2 načina je predstavljena stopnja sreče po državah, ki so razdeljene po celinah.

```{r graf1, echo=FALSE, message=FALSE, warning=FALSE}
print(graf1)
```

```{r graf2, echo=FALSE, message=FALSE, warning=FALSE}
print(graf2)
```

Pri tretjem grafu sem iskal kolikšna je korelacija med stopnjo sreče v državi in posameznimi dejavniki. Iz grafa vidimo, da gospodarsko stanje države, pričakovana življenjska doba in družina igrajo največjo vlogo pri stopnji sreče prebivalcev posamezne države.

```{r data3, echo=FALSE, message=FALSE, warning=FALSE}
corrplot(data3, method = "number", title = "Korelacija med stopnjo srečo in dejavniki")
```

Z naslednjim grafom sem hotel ugotoviti ali obstaja kakšna povezava med stopnjo sreče in številom prebivalcev države. Iz grafa vidimo, da obstaja šibko obratno soodvisje teh dveh vrednosti. Prebivalci države so srečnejši, če v njej živi manj ljudi. Podobno sm naredil tudi s podatkom za prirast prebivalstva. Tu je obratna soodvisnost izrazitejša kot prej, torej obstaja povezava med nižjim prirastom prebivalstva in višjo stopnjo sreče ljudi.
```{r data4, echo=FALSE, message=FALSE, warning=FALSE}
corrplot(data4, method = "number", title = "Korelacija med stopnjo sreče in številom prebivalstva")
```

V spodnjem grafu so prikazane 3 države, v katerih se je med leti 2015 - 2017 stopnja sreče najbolj spreminjala in 3, kjer se je najmanj. Največje spremembe so bile pri Venezueli, Alžiriji in Liberiji, najmanjše pa na Danskem, v Trinidadu in Tobagu ter Burundiju.

```{r graf3, echo=FALSE, message=FALSE, warning=FALSE}
print(graf3)
```

Ker nimam zbranih podatkov za vse države sveta, sem se odločil z zemljevidom predstaviti stopnjo sreče samo v državah po Evropi. Manjkajo podatki nekaterih zelo majhnih držav (Monako, Vatikan, Lihtenštajn, San Marino, Andora) in (bolj al manj priznanega) Kosova.
Svetlejši odtenki modre predstavljajo višjo vrednost stopnje sreče. Praviloma so prebivalci severnejših držav srečnejši, kar je pričakovano, saj so te države tudi gospodarsko najuspešnejše v Evropi, pri tretjem grafu pa smo ugotovili, da gospodarska razvitost močno vpliva na stopnjo sreče prebivalcev.
```{r zem, echo=FALSE, message=FALSE, warning=FALSE}
print(zem)
```

